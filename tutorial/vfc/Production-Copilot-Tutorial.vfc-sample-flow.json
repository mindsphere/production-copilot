[{"id":"e1f2d78c.c95478","type":"tab","allowCycles":false,"label":"CopilotTutorial","disabled":false,"info":""},{"id":"af8c23e2.4dd83","type":"combine","z":"e1f2d78c.c95478","name":"","triggers":"1,0,0","inputs":"3","timeseries":false,"waitall":false,"reset":false,"x":940,"y":120,"wires":[["af254115.d5359","3b28e104.caca2e"]]},{"id":"373c58f3.4ddab8","type":"comment","z":"e1f2d78c.c95478","name":"GetPlantStatus skill","info":"","sticky":2,"x":130,"y":40,"wires":[]},{"id":"b11d1453.a92908","type":"comment","z":"e1f2d78c.c95478","name":"GetEvents skill","info":"","sticky":2,"x":150,"y":240,"wires":[]},{"id":"e137a2ce.4c23","type":"comment","z":"e1f2d78c.c95478","name":"GetCases skill","info":"","sticky":2,"x":150,"y":420,"wires":[]},{"id":"92508b3.1606f78","type":"comment","z":"e1f2d78c.c95478","name":"GetEnergyCost skill","info":"","sticky":2,"x":130,"y":620,"wires":[]},{"id":"1294d9f5.f97a26","type":"comment","z":"e1f2d78c.c95478","name":"CreateNewCase skill","info":"","sticky":2,"x":130,"y":840,"wires":[]},{"id":"627f70f4.3ad96","type":"create event","z":"e1f2d78c.c95478","name":"Simulate event","asset":"1d22c207ccb34957962df3a005b2c89d","assetName":"01 - Stencil Printer","severity":"30","acknowledged":"false","description":"Front gearbox vibration problem","x":1580,"y":280,"wires":[],"_type":"node"},{"id":"47980e6f.9fa5f","type":"create-work-order","z":"e1f2d78c.c95478","name":"Create Case","title":"\"test\"","description":"\"test\"","assignedTo":"","dueDate":"2024-10-10","datetimepickerDueDate":"2024-10-10","orderStatus":"OPEN","priority":"LOW","orderType":"PLANNED","asset":"","assetName":"","fileAsset":"","fileName":"","x":650,"y":880,"wires":[["971e0cb5.38f34","91171bd3.b50f08"]]},{"id":"af254115.d5359","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":1160,"y":160,"wires":[]},{"id":"8fcf62cf.54e42","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":880,"y":320,"wires":[]},{"id":"2ea1481d.6855d8","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":880,"y":500,"wires":[]},{"id":"e3d72a85.8ecaa8","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":880,"y":700,"wires":[]},{"id":"971e0cb5.38f34","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":880,"y":920,"wires":[]},{"id":"bae9f9f5.82e2c8","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":400,"y":40,"wires":[]},{"id":"68b616d2.c9f8f8","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":400,"y":240,"wires":[]},{"id":"10c5d701.ebfeb9","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":400,"y":420,"wires":[]},{"id":"74b5a737.45e838","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":400,"y":620,"wires":[]},{"id":"2add9f43.5f8bb","type":"debug","z":"e1f2d78c.c95478","name":"debug output","active":true,"console":"false","xaxis":"_time","complete":"payload","x":400,"y":840,"wires":[]},{"id":"b83bd99a.2d4ff8","type":"function","z":"e1f2d78c.c95478","name":"Translate Status","func":"const assetName = 'Stencil printer';\n\nconst statuses = {\n    0: '❔ unknown status',\n    20: '❌  ERROR',\n    30: '⚠️   Warning',\n    40: 'ⓘ  Information',\n    50: '✅  Operational'\n};\n\nconst assetStatus = statuses[msg.payload.health];\n\nmsg.payload = assetName + ': ' + assetStatus;\n              \nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":680,"y":80,"wires":[["af8c23e2.4dd83"]]},{"id":"66f49094.3baf7","type":"function","z":"e1f2d78c.c95478","name":"Translate Status","func":"const assetName = 'SPI machine';\n\nconst statuses = {\n    0: '❔ unknown status',\n    20: '❌  ERROR',\n    30: '⚠️   Warning',\n    40: 'ⓘ  Information',\n    50: '✅  Operational'\n};\n\nconst assetStatus = statuses[msg.payload.health];\n\nmsg.payload = assetName + ': ' + assetStatus;\n              \nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":680,"y":120,"wires":[["af8c23e2.4dd83:1"]]},{"id":"955cbe97.91d5","type":"function","z":"e1f2d78c.c95478","name":"Translate Status","func":"const assetName = 'SMT placing';\n\nconst statuses = {\n    0: '❔ unknown status',\n    20: '❌  ERROR',\n    30: '⚠️   Warning',\n    40: 'ⓘ  Information',\n    50: '✅  Operational'\n};\n\nconst assetStatus = statuses[msg.payload.health];\n\nmsg.payload = assetName + ': ' + assetStatus;\n              \nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":680,"y":160,"wires":[["af8c23e2.4dd83:2"]]},{"id":"2f95f7b9.4baa98","type":"function","z":"e1f2d78c.c95478","name":"Filter","func":"const statuses = {\n    0: 'unknown status',\n    20: 'error',\n    30: 'warning',\n    40: 'information',\n    50: 'OK'\n};\n\n// remove info events\nconst inputArray  = msg.payload.filter(item => item.severity !== 40);\n \n// limit to 50 messages\nconst limitedArray = inputArray.slice(0, 50);\n\n// select the interesting fields, and map codes to text\nconst resultArray = limitedArray.map(item => ({\n    timestamp: item.timestamp,\n    description: item.description,\n    severity: statuses[item.severity]\n}));\n\n\nmsg.payload = resultArray;\nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":650,"y":280,"wires":[["8fcf62cf.54e42","6b421984.7a34c8"]]},{"id":"b0548215.8ad82","type":"function","z":"e1f2d78c.c95478","name":"Filter","func":"const statuses = {\n    0: 'unknown status',\n    20: 'error',\n    30: 'warning',\n    40: 'information',\n    50: 'OK'\n};\n\n// limit to 50 \nconst limitedArray = msg.payload.slice(0, 50);\n\n// select the interesting fields\nconst resultArray = limitedArray.map(item => ({\n    createdDate: item.createdDate,\n    title: item.title,\n    type: item.type,\n    priority: item.priority,\n    description: item.description,\n    handle: item.handle\n}));\n\nmsg.payload = resultArray;\nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":650,"y":460,"wires":[["2ea1481d.6855d8","57f5ccb8.8a68a4"]]},{"id":"bb3c044a.3f4048","type":"function","z":"e1f2d78c.c95478","name":"Extract market price","func":"var data = msg.payload.data;\n\nif (data && data.length > 0) {\n    // in case rate limiting kicks in, use replacement value\n    if (data[0].marketprice === \"Too many requests\") {\n        msg.payload = '233 Eur/MWh';\n    }\n    else {\n        msg.payload = data[0].marketprice + ' Eur/MWh';\n    }\n} else {\n    // in case the http call failed use replacement value\n    msg.payload = '234 Eur/MWh';\n}\nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":650,"y":660,"wires":[["e3d72a85.8ecaa8","2f41f828.bd24b8"]]},{"id":"5bbb9aa2.4a7724","type":"function","z":"e1f2d78c.c95478","name":"Extract Parameters","func":"const title = msg.payload.title.substring(0,30);\nconst description = msg.payload.description.substring(0,200);\nconst currentDate = new Date();\n\nmsg.payload = {\n    title: title,\n    description: description,\n    status: \"Open\",\n    priority: \"MEDIUM\",\n    type: \"Planned\",\n    dueDate: currentDate.toISOString()\n};\n\nreturn msg;","outputs":1,"language":"javascript","noerr":0,"x":410,"y":880,"wires":[["47980e6f.9fa5f"]]},{"id":"36d49b4f.11d874","type":"http request","z":"e1f2d78c.c95478","name":"GET real market price","method":"GET","ret":"obj","url":"https://api.corrently.io/v2.0/marketdata?zip=76189&token=xyz","timeout":"20","mindspherePath":"","useMindsphereAuth":false,"isAdmin":false,"secretHeaders":"","x":420,"y":660,"wires":[["bb3c044a.3f4048"]]},{"id":"a4f3feb2.ce8c7","type":"inject","z":"e1f2d78c.c95478","name":"manual trigger","topic":"","payload":"","payloadType":"date","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":140,"y":120,"wires":[["fcf20cd2.0967a","f64cea97.e65188","25165460.2c589c"]]},{"id":"c1ed5c11.26148","type":"inject","z":"e1f2d78c.c95478","name":"set status","topic":"","payload":"50","payloadType":"num","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":1400,"y":100,"wires":[["4ec7bffb.43d1d"]]},{"id":"7afa3c40.4e5e04","type":"inject","z":"e1f2d78c.c95478","name":"set status","topic":"","payload":"50","payloadType":"num","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":1400,"y":140,"wires":[["9698fe8b.edbac"]]},{"id":"8c96386f.757568","type":"inject","z":"e1f2d78c.c95478","name":"set status","topic":"","payload":"30","payloadType":"num","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":1400,"y":180,"wires":[["b2816cd6.0a01c"]]},{"id":"93ea40cb.7894d","type":"inject","z":"e1f2d78c.c95478","name":"manual trigger","topic":"","payload":"","payloadType":"date","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":140,"y":320,"wires":[["4150f798.a34038"]]},{"id":"78ab4ad0.35d094","type":"inject","z":"e1f2d78c.c95478","name":"manual trigger","topic":"","payload":"","payloadType":"date","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":140,"y":500,"wires":[["d4a19d76.2b4e6"]]},{"id":"e39f7a11.d86bd8","type":"inject","z":"e1f2d78c.c95478","name":"manual trigger","topic":"","payload":"","payloadType":"date","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":140,"y":700,"wires":[["36d49b4f.11d874"]]},{"id":"305d3557.a2331a","type":"inject","z":"e1f2d78c.c95478","name":"Simulate","topic":"","payload":"","payloadType":"num","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":1400,"y":280,"wires":[["627f70f4.3ad96"]]},{"id":"5e03671c.247ff8","type":"inject","z":"e1f2d78c.c95478","name":"manual trigger","topic":"","payload":"{\"title\":\"demo title\",\"description\":\"demo description\"}","payloadType":"json","repeat":"","repeatEnd":"0","endTime":"0","crontab":"","offset":"NaN","once":false,"properties":"","timezone":"utc","betweentimesunit":"m","showNextExecution":false,"powerMode":false,"x":140,"y":920,"wires":[["5bbb9aa2.4a7724"]]},{"id":"d4a19d76.2b4e6","type":"list-work-orders","z":"e1f2d78c.c95478","name":"Get cases","handle":"","x":380,"y":460,"wires":[["b0548215.8ad82"]]},{"id":"4150f798.a34038","type":"read events","z":"e1f2d78c.c95478","name":"Get Events","asset":"","assetName":"","severity":"","acknowledged":"","period":"1440","mode":"relative","from":"","datetimepickerFrom":"","to":"","datetimepickerTo":"","timezoneoffset":0,"thoroughly":false,"x":390,"y":280,"wires":[["2f95f7b9.4baa98"]]},{"id":"fcf20cd2.0967a","type":"read-static","z":"e1f2d78c.c95478","name":"GetState - Stencil Printer","topic":"1d22c207ccb34957962df3a005b2c89d/status/health","topicLabel":"01 - Stencil Printer/status/health","topicData":"{\"asset\":\"1d22c207ccb34957962df3a005b2c89d\",\"assetName\":\"01 - Stencil Printer\",\"aspect\":\"status\",\"aspectName\":\"status\",\"variables\":[{\"name\":\"health\",\"variableId\":\"health\"}]}","assetName":"","aspectName":"","x":430,"y":80,"wires":[["b83bd99a.2d4ff8"]]},{"id":"f64cea97.e65188","type":"read-static","z":"e1f2d78c.c95478","name":"GetState - SPI machine","topic":"bb3a49e9e2ca44399f6266bf6a3514d5/status/health","topicLabel":" 02 - SPI/status/health","topicData":"{\"asset\":\"bb3a49e9e2ca44399f6266bf6a3514d5\",\"assetName\":\" 02 - SPI\",\"aspect\":\"status\",\"aspectName\":\"status\",\"variables\":[{\"name\":\"health\",\"variableId\":\"health\"}]}","assetName":"","aspectName":"","x":420,"y":120,"wires":[["66f49094.3baf7"]]},{"id":"25165460.2c589c","type":"read-static","z":"e1f2d78c.c95478","name":"GetState - SMT placing","topic":"654ed7ea2959458aab7c03c193a8f26c/status/health","topicLabel":" 03 - SMT Placing Machine/status/health","topicData":"{\"asset\":\"654ed7ea2959458aab7c03c193a8f26c\",\"assetName\":\" 03 - SMT Placing Machine\",\"aspect\":\"status\",\"aspectName\":\"status\",\"variables\":[{\"name\":\"health\",\"variableId\":\"health\"}]}","assetName":"","aspectName":"","x":420,"y":160,"wires":[["955cbe97.91d5"]]},{"id":"3b28e104.caca2e","type":"skills-response","z":"e1f2d78c.c95478","name":"","x":1150,"y":120,"wires":[]},{"id":"6b421984.7a34c8","type":"skills-response","z":"e1f2d78c.c95478","name":"","x":870,"y":280,"wires":[]},{"id":"57f5ccb8.8a68a4","type":"skills-response","z":"e1f2d78c.c95478","name":"","x":870,"y":460,"wires":[]},{"id":"2f41f828.bd24b8","type":"skills-response","z":"e1f2d78c.c95478","name":"","x":870,"y":660,"wires":[]},{"id":"91171bd3.b50f08","type":"skills-response","z":"e1f2d78c.c95478","name":"","x":870,"y":880,"wires":[]},{"id":"ff28e6c.e68b818","type":"skills-trigger","z":"e1f2d78c.c95478","name":"TutorialGetPlantStatus","key":"TutorialGetPlantStatus","x":120,"y":80,"wires":[["fcf20cd2.0967a","f64cea97.e65188","25165460.2c589c","bae9f9f5.82e2c8"]]},{"id":"543e7f56.5bf85","type":"skills-trigger","z":"e1f2d78c.c95478","name":"TutorialGetEvents","key":"TutorialGetEvents","x":140,"y":280,"wires":[["4150f798.a34038","68b616d2.c9f8f8"]]},{"id":"3d23c792.ffd948","type":"skills-trigger","z":"e1f2d78c.c95478","name":"TutorialGetCases","key":"TutorialGetCases","x":140,"y":460,"wires":[["d4a19d76.2b4e6","10c5d701.ebfeb9"]]},{"id":"59b25f87.024d4","type":"skills-trigger","z":"e1f2d78c.c95478","name":"TutorialGetEnergyCost","key":"TutorialGetEnergyCost","x":120,"y":660,"wires":[["36d49b4f.11d874","74b5a737.45e838"]]},{"id":"4c0b7251.e9a4bc","type":"skills-trigger","z":"e1f2d78c.c95478","name":"TutorialCreateNewCase","key":"TutorialCreateNewCase","x":120,"y":880,"wires":[["5bbb9aa2.4a7724","2add9f43.5f8bb"]]},{"id":"9698fe8b.edbac","type":"write-static","z":"e1f2d78c.c95478","name":"Simulate SPI machine","topic":"bb3a49e9e2ca44399f6266bf6a3514d5/status/health","topicLabel":" 02 - SPI/status/health","topicData":"{\"asset\":\"bb3a49e9e2ca44399f6266bf6a3514d5\",\"assetName\":\" 02 - SPI\",\"aspect\":\"status\",\"aspectName\":\"status\",\"variables\":[{\"name\":\"health\",\"variableId\":\"health\"}]}","assetName":"","aspectName":"","x":1600,"y":140,"wires":[]},{"id":"4ec7bffb.43d1d","type":"write-static","z":"e1f2d78c.c95478","name":"Simulate Stencil printer","topic":"1d22c207ccb34957962df3a005b2c89d/status/health","topicLabel":"01 - Stencil Printer/status/health","topicData":"{\"asset\":\"1d22c207ccb34957962df3a005b2c89d\",\"assetName\":\"01 - Stencil Printer\",\"aspect\":\"status\",\"aspectName\":\"status\",\"variables\":[{\"name\":\"health\",\"variableId\":\"health\"}]}","assetName":"","aspectName":"","x":1600,"y":100,"wires":[]},{"id":"b2816cd6.0a01c","type":"write-static","z":"e1f2d78c.c95478","name":"Simulate SMT placing","topic":"654ed7ea2959458aab7c03c193a8f26c/status/health","topicLabel":" 03 - SMT Placing Machine/status/health","topicData":"{\"asset\":\"654ed7ea2959458aab7c03c193a8f26c\",\"assetName\":\" 03 - SMT Placing Machine\",\"aspect\":\"status\",\"aspectName\":\"status\",\"variables\":[{\"name\":\"health\",\"variableId\":\"health\"}]}","assetName":"","aspectName":"","x":1600,"y":180,"wires":[]}]